---
layout: default
title: PhantomJS 1.5 Release Notes
categories: release
permalink: release-1.5.html
---

<p>PhantomJS 1.5, <em><a href="release-names.html">Ghost Flower</a></em>, was released on March 20, 2012. This version is backward compatible with version 1.4. Existing scripts should work without any modification, unless there is a need to run Flash or other plugins (see below).</p>

<p>PyPhantomJS, the implementation of PhantomJS in Python with PyQt, ceased the development (issue 344) and thus the code has been removed from the repository.</p>

<p><strong>Pure headless (no X11) on Linux</strong></p>

<p>While it's always possible to customize the build of PhantomJS Linux without X11 (in particular since the last 1.4 release), it's a tedious adventure. Beginning from this release, X11-less setup is the standard when building PhantomJS Linux from source.</p>

<p>The benefits of pure headless are two-fold: no need to use Xvfb, it also compiles out-of-the-box on a barebone Linux server without GUI. This should make it easy to place PhantomJS in various continuous integration systems and cloud/elastic platforms.</p>

<p>Note that the pure headless mode does not compromise the functionalities and rendering quality. For screen capture, text rasterization is still done through FreeType and Fontconfig. Various formats (PNG, GIF, JPEG) for inlined images are still supported. Even producing PDF from the web page works just fine.</p>

<p><strong>No more support for Flash and other plugins</strong></p>

<p>Plugin support has been completely disabled (see  issue 413) for the following reasons:</p>

<ul>
    <li>Going pure headless without X11 means it is not possible to have native window handle for the plugin.</li>
    <li>Flash apps should be tested by whatever tools Adobe provides to the developers.</li>
    <li>Issues are reported but nobody volunteers to analyze or fix them.</li>
</ul>

<p>Future reported issues and bugs which relate to Flash and other plugins will be marked as WontFix.</p>

<p><strong>Improved troubleshooting</strong></p>

<p>To facilitates easier troubleshooting, there exists support for interactive mode (REPL), remote debugging, and error handling.</p>

<p>If PhantomJS is launched without any argument, it starts in the so-called interactive mode, also known for REPL (read-eval-print-loop). This mode allows a faster cycle of experiment and script prototyping. PhantomJS REPL supports the expected features: command editing, persistent history, and autocomplete (with Tab key).</p>

<p>Terminal line editing feature of this interactive mode is based on <a href="https://github.com/tadmarshall/linenoise">Linenoise</a> (an improved fork of the <a href="https://github.com/antirez/linenoise">original project</a>).</p>

<p>Remote debugging permits inspection of the script and web page via another WebKit-based browser (Safari and Chrome). This is achieved by launching PhantomJS with the new option, as in this example</p>

<pre>phantomjs --remote-debugger-port=9000 test.js</pre>

<p>After than, open Safari/Chrome and go to the http://ipaddress:9000. The browser will show the familiar Web Inspector interface which in this case works on the script being tested.</p>

<p>Note: As of now, remote debugging is only for Linux (see issue 430) .</p>

<p>To easily catch an error occured in a web page, whether it is a syntax error or other thrown exception, an onError handler for the WebPage object has been added. An example on such a handler is:</p>

<pre>
page.onError = function (msg, trace) {
    console.log(msg);
    trace.forEach(function(item) {
        console.log('  ', item.file, ':', item.line);
    })
}
</pre>

<p>Now if the page opens a site with some JavaScript? exceptions, a detailed information (including the stack trace) will be printed out.</p>

<p>Note: Further refinement to the stack trace is still being planned (see issue 166).</p>

<p><strong>System module</strong></p>

<p>A set of functions to access system-level functionalities is available, modelled after CommonJS System proposal.</p>

<p>To start using, it needs to be instantiated via the system module such as:</p>

<pre>var system = require('system');</pre>

<p>Read-only properties:</p>

<ul>
    <li>platform is the name of the platform, always fixed as phantomjs.
</ul>

<p>Query functions:

<ul>
    <li>env returns the list (as key value pair) of the environment variables.
    <li>args returns the list of command-line arguments. The first one is always the script name, it is followed by the subsequent arguments.
</ul>

<p>An example printenv.js demonstrates the same functionality as in the Unix printenv utility:</p>

<pre>
var system = require('system'),
    env = system.env,
    key;

for (key in env) {
    if (env.hasOwnProperty(key)) {
        console.log(key + '=' + env[key]);
    }
}
phantom.exit();
</pre>

<p>An example arguments.js prints all the command-line arguments:</p>

<pre>
var system = require('system');
if (system.args.length === 1) {
    console.log('Try to pass some args when invoking this script!');
} else {
    system.args.forEach(function (arg, i) {
            console.log(i + ': ' + arg);
    });
}
phantom.exit();
</pre>

<p>If the script is invoked:</p>

<pre>phantomjs arguments.js answer 42</pre>

<p>gives the following result:

<pre>
0: arguments.js
1: answer
2: 42
</pre>

<p><strong>Control web security</strong></p>

<p>Performing cross-domain XHR is often necessary for some scripting purposes. This is now possible by disabling web security (issue 28), either with --web-security=no command-line option or webSecurityEnabled page setting.</p>

<p>Note: Disabling web security may make the system more vulnerable to attacks and other malicious content. Use it with great caution.

<p>An example findads.js uses disabled web security to access the frame content from Google Ads server: https://gist.github.com/2037945.

<p><strong>New features</strong></p>

<ul>
    <li>Added interactive mode, also known as REPL (issue 252)
    <li>Added setting for web security, to allow cross domain XHR (issue 28)
    <li>Added error handler for WebPage object (issue 166)
    <li>Removed X11/Xlib requirement on Linux (issue 163)
    <li>Added support for custom HTTP header in the network request (issue 77)
    <li>Added support for read write encoding in the file system module (issue 367)
    <li>Added remote debugging support on Linux (issue 6)
    <li>Added support for proxy authentication (issue 105)
    <li>Added System module, to retrieve environment variables (issue 271) and arguments (issue 276)
    <li>Added fs.readLink function (issue 329)
    <li>Added support for reading and writing binary data (issue 400)
    <li>Added support to retrieve request data in the WebServer? module (issue 340)
    <li>Added support for individual top/bottom/left/right print margins (issue 388)
    <li>Added command-line option --help (issue 347)
    <li>Added short command-line options -v and -h (issue 408)
    <li>Removed support for Flash and other plugins (issue 418)
</ul>

<p><strong>Bug fixes</strong></p>

<ul>
    <li>Fixed multiple console.log arguments (issue 36)
    <li>Fixed file upload (issue 307)
    <li>Fixed the web server instance to be asynchronous (issue 326) and still support Keep Alive (issue 416)
    <li>Workaround Qt 4.8.0 crash due to empty URL scheme (issue 365)
    <li>Fixed a Content-Type problem where POST does not work (issue 337)
    <li>Fixed Jasmine test runner with Jasmine 1.1 (issue 402)
    <li>Don't display debugging and warning messages (issue 323)
</ul>

<p>Back to <a href="releases.html">all releases</a>.</p>
